<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CCS Winners Email Sender</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        background-color: #fff;
        color: #000;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
      }

      .container {
        border: 1px solid #000;
        padding: 30px 40px;
        border-radius: 10px;
        width: 100%;
        max-width: 420px;
      }

      h2 {
        text-align: center;
        font-weight: 700;
        margin-bottom: 25px;
      }

      label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
      }

      input,
      select,
      button {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #000;
        border-radius: 4px;
        background: #fff;
        color: #000;
        font-size: 15px;
      }

      button {
        background: #000;
        color: #fff;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      button:hover {
        background: #222;
      }

      .status {
        text-align: center;
        font-size: 14px;
        margin-top: 10px;
        min-height: 20px;
      }

      .place-indicator {
        padding: 8px;
        border-radius: 4px;
        margin-bottom: 15px;
        text-align: center;
        font-weight: 600;
        display: none;
      }

      .place-indicator.gold {
        background: #ffd700;
        color: #000;
        display: block;
      }

      .place-indicator.silver {
        background: #c0c0c0;
        color: #000;
        display: block;
      }

      .place-indicator.bronze {
        background: #cd7f32;
        color: #fff;
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Send Winner Email</h2>

      <label for="name">Winner Name</label>
      <input type="text" id="name" placeholder="Enter winner name" required />

      <label for="place">Place</label>
      <select id="place" required>
        <option value="">Select Place</option>
        <option value="gold">ü•á 1st Place - Gold</option>
        <option value="silver">ü•à 2nd Place - Silver</option>
        <option value="bronze">ü•â 3rd Place - Bronze</option>
      </select>

      <div id="placeIndicator" class="place-indicator"></div>

      <label for="category">Programming Category</label>
      <select id="category" required>
        <option value="">Select Category</option>
        <option value="C++">C++</option>
        <option value="Java">Java</option>
        <option value="Python">Python</option>
      </select>

      <label for="score">Score</label>
      <input
        type="number"
        id="score"
        placeholder="Enter score"
        min="0"
        max="100"
        required
      />

      <label for="email">Recipient Email</label>
      <input
        type="email"
        id="email"
        placeholder="Enter winner email"
        required
      />

      <button id="sendBtn">Send Email</button>

      <div class="status" id="status"></div>
    </div>

    <script>
      const sendBtn = document.getElementById("sendBtn");
      const statusEl = document.getElementById("status");
      const placeSelect = document.getElementById("place");
      const placeIndicator = document.getElementById("placeIndicator");

      placeSelect.addEventListener("change", () => {
        const place = placeSelect.value;
        placeIndicator.className = "place-indicator";

        if (place === "gold") {
          placeIndicator.classList.add("gold");
          placeIndicator.textContent = "ü•á 1st Place Preview";
        } else if (place === "silver") {
          placeIndicator.classList.add("silver");
          placeIndicator.textContent = "ü•à 2nd Place Preview";
        } else if (place === "bronze") {
          placeIndicator.classList.add("bronze");
          placeIndicator.textContent = "ü•â 3rd Place Preview";
        }
      });

      sendBtn.addEventListener("click", async () => {
        const name = document.getElementById("name").value.trim();
        const place = document.getElementById("place").value.trim();
        const category = document.getElementById("category").value.trim();
        const score = document.getElementById("score").value.trim();
        const email = document.getElementById("email").value.trim();

        if (!name || !place || !category || !score || !email) {
          statusEl.textContent = "‚ö†Ô∏è Please fill in all fields.";
          return;
        }

        statusEl.textContent = "‚è≥ Sending email...";

        try {
          const res = await fetch("http://localhost:3000/send-winner", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, place, category, score, email }),
          });

          const data = await res.json();
          if (data.success) {
            statusEl.textContent = "‚úÖ Email sent successfully!";
            // Clear form
            document.getElementById("name").value = "";
            document.getElementById("place").value = "";
            document.getElementById("category").value = "";
            document.getElementById("score").value = "";
            document.getElementById("email").value = "";
            placeIndicator.className = "place-indicator";
          } else {
            statusEl.textContent = "‚ùå Failed to send email.";
          }
        } catch (err) {
          console.error(err);
          statusEl.textContent = "‚ö†Ô∏è Server error.";
        }
      });
    </script>
  </body>
</html>
